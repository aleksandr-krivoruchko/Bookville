{"mappings":"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","sources":["src/js/order.js","src/templates/order-item.hbs"],"sourcesContent":["import { refs } from './common-ref';\nimport orderItemTpl from '../templates/order-item.hbs';\n\nconst STORAGE_KEY = 'order-form';\nrender();\nsetBooksCountInOrder();\n// refs.totalPriceInCart.textContent = refs.totalPriceInCart.textContent;\n\nconsole.log(refs.totalPriceInCart.textContent);\n\nrefs.orderForm.addEventListener('submit', onFormSubmit);\nrefs.orderForm.addEventListener('change', setInputToStorage);\n\ninitForm();\n\nfunction setInputToStorage(e) {\n  let persistedValues = localStorage.getItem(STORAGE_KEY);\n  persistedValues = persistedValues ? JSON.parse(persistedValues) : {};\n  persistedValues[e.target.name] = e.target.value;\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(persistedValues));\n}\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n\n  const formData = new FormData(refs.orderForm);\n\n  formData.forEach((value, name) => console.log(name, value));\n\n  localStorage.removeItem(STORAGE_KEY);\n  localStorage.removeItem('booksInCart');\n\n  e.currentTarget.reset();\n}\n\nfunction initForm() {\n  let dataStorage = localStorage.getItem(STORAGE_KEY);\n\n  if (dataStorage) {\n    dataStorage = JSON.parse(dataStorage);\n  }\n\n  Object.entries(dataStorage).forEach(([name, value]) => {\n    refs.orderForm.elements[name].value = value;\n  });\n}\n\nfunction render() {\n  const savedBooks = localStorage.getItem('booksInCart');\n  const booksInCart = JSON.parse(savedBooks);\n\n  console.log(booksInCart);\n\n  const markup = booksInCart.map(orderItemTpl);\n\n  refs.booksInOrder.insertAdjacentHTML('beforeend', markup.join(''));\n}\n\nfunction setBooksCountInOrder() {\n  let savedBooks = localStorage.getItem('booksInCart');\n\n  if (savedBooks) {\n    savedBooks = JSON.parse(savedBooks);\n  }\n  refs.totalPriceInOrder.textContent = savedBooks.length * 100;\n}\n","<li class=\"order-card__item\">\n\t<div>\n\t\t<p class=\"card__author\">{{author}}</p>\n\t\t<p class=\"card__book\">{{name}}</p>\n\t</div>\n<div>\n\t\t<span class=\"card__amount\">1</span>\n\t\t<span>x</span>\n\t\t<span class=\"card__price\">{{price}}$</span>\n</div>\n</li>"],"names":["$4HWmI","parcelRequire","$6bae6f1c08a9c0f5$export$2e2bcd8739ae039","$parcel$interopDefault","template","compiler","main","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","name","hash","loc","start","line","column","end","useData","$c2f6547a9e2878f8$var$STORAGE_KEY","savedBooks","localStorage","getItem","booksInCart","JSON","parse","console","log","markup","map","refs","booksInOrder","insertAdjacentHTML","join","$c2f6547a9e2878f8$var$render","totalPriceInOrder","textContent","length","$c2f6547a9e2878f8$var$setBooksCountInOrder","totalPriceInCart","orderForm","addEventListener","e","preventDefault","FormData","forEach","value","removeItem","currentTarget","reset","persistedValues","target","setItem","stringify","dataStorage","entries","elements","$c2f6547a9e2878f8$var$initForm"],"version":3,"file":"order-page.dd30a114.js.map"}