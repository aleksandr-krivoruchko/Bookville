{"mappings":"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","sources":["src/js/cart.js","src/templates/cart-item.hbs","src/js/book-counter.js"],"sourcesContent":["import { refs } from './common-ref';\nimport cartItemTpl from '../templates/cart-item.hbs';\nimport { bookCounter } from './book-counter.js';\n\nconst savedBooks = localStorage.getItem('booksInCart');\nconst booksInCart = JSON.parse(savedBooks);\n\nrefs.headerCartBooksCount.textContent = booksInCart.length;\n\nif (booksInCart) {\n  refs.cartMessage.classList.add('cart__message--none');\n}\n\nrender();\nbookCounter();\n\nfunction render() {\n  const markup = booksInCart.map(cartItemTpl);\n\n  refs.bookList.insertAdjacentHTML('beforeend', markup.join(''));\n}\n","<li class=\"cart__item\" id={{id}}>\n\t<div class=\"cart__img-wrapper\">\n\t\t<img src={{img}} alt={{name}} class=\"cart__img\" width=\"50\" height=\"80\" />\n\t</div>\n\t<div class=\"cart__book-info\">\n\t\t<div>\n\t\t\t<p class=\"cart__book-info-author\">{{author}}</p>\n\t\t\t<p class=\"cart__book-info-name\">{{name}}</p>\n\t\t</div>\n\t\t<div class=\"cart__book-wrapper\">\n\t\t\t<div class=\"cart__book-amount\">\n\t\t\t\t<button class=\"cart__book-amount-btn\" data-action=\"incr\">\n\t\t\t\t\t+\n\t\t\t\t</button>\n\t\t\t\t<span class=\"cart__book-amount-text\">1</span>\n\t\t\t\t<button class=\"cart__book-amount-btn\" data-action=\"decr\">\n\t\t\t\t\t-\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<p class=\"cart__book-price\"><span>{{price}}</span> $</p>\n\t\t</div>\n\t</div>\n</li>","import { refs } from './common-ref.js';\n\nexport function bookCounter() {\n  const bookListItems = document.querySelectorAll('.cart__list .cart__item');\n\n  bookListItems.forEach(el => {\n    let bookAmount = el.querySelector('.cart__book-amount-text');\n    const btnIncr = el.querySelector('button[data-action=\"incr\"]');\n    const btnDecr = el.querySelector('button[data-action=\"decr\"]');\n    let price = el.querySelector('.cart__book-price span');\n\n    refs.paymentTotalPrice.textContent =\n      Number(refs.paymentTotalPrice.textContent) + Number(price.textContent);\n\n    if (bookAmount.textContent == 0) {\n      btnDecr.disabled = true;\n      btnDecr.classList.add('cart__book-amount-btn--disabled');\n    }\n\n    btnIncr.addEventListener('click', e => {\n      if (e.target.dataset.action === 'incr') {\n        bookAmount.textContent++;\n        refs.paymentTotalPrice.textContent =\n          Number(refs.paymentTotalPrice.textContent) +\n          Number(price.textContent);\n      }\n      if (bookAmount.textContent > 0) {\n        btnDecr.disabled = false;\n        btnDecr.classList.remove('cart__book-amount-btn--disabled');\n      }\n    });\n    btnDecr.addEventListener('click', e => {\n      if (e.target.dataset.action === 'decr') {\n        bookAmount.textContent--;\n        refs.paymentTotalPrice.textContent =\n          Number(refs.paymentTotalPrice.textContent) -\n          Number(price.textContent);\n      }\n      if (bookAmount.textContent <= 0) {\n        btnDecr.disabled = true;\n        btnDecr.classList.add('cart__book-amount-btn--disabled');\n      }\n    });\n  });\n}\n"],"names":["$4HWmI","parcelRequire","$44ace8cbb29b18be$export$2e2bcd8739ae039","$parcel$interopDefault","template","compiler","main","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","name","hash","loc","start","line","column","end","useData","$ce375e1befa17f1c$var$savedBooks","localStorage","getItem","$ce375e1befa17f1c$var$booksInCart","JSON","parse","refs","headerCartBooksCount","textContent","length","cartMessage","classList","add","markup","map","bookList","insertAdjacentHTML","join","$ce375e1befa17f1c$var$render","document","querySelectorAll","forEach","el","bookAmount","querySelector","btnIncr","btnDecr","price","paymentTotalPrice","Number","disabled","addEventListener","e","target","dataset","action","remove"],"version":3,"file":"cart-page.32238630.js.map"}