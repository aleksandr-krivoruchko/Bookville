{"mappings":"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","sources":["src/js/cart.js","src/templates/cart-item.hbs","src/js/book-counter.js"],"sourcesContent":["import { refs } from './common-ref';\nimport cartItemTpl from '../templates/cart-item.hbs';\nimport { bookCounter } from './book-counter.js';\nimport { setBooksCountInCart, setBooksCountInFav } from './setBooksCountInCart';\n\nconst savedBooks = setBooksCountInCart();\n\nif (savedBooks) {\n  refs.cartMessage.classList.add('cart__message--none');\n}\n\nconsole.log(savedBooks);\nrender();\nsetBooksCountInCart();\n// setBooksCountInFav();\nbookCounter();\n\nfunction render() {\n  const markup = savedBooks.map(cartItemTpl);\n\n  refs.bookList.insertAdjacentHTML('beforeend', markup.join(''));\n}\n","<li class=\"cart__item\" id={{id}}>\n\t<div class=\"cart__img-wrapper\">\n\t\t<img src={{img}} alt={{name}} class=\"cart__img\" width=\"50\" height=\"80\" />\n\t</div>\n\t<div class=\"cart__book-info\">\n\t\t<div>\n\t\t\t<p class=\"cart__book-info-author\">{{author}}</p>\n\t\t\t<p class=\"cart__book-info-name\">{{title}}</p>\n\t\t</div>\n\t\t<div class=\"cart__book-wrapper\">\n\t\t\t<div class=\"cart__book-amount\">\n\t\t\t\t<button class=\"cart__book-amount-btn\" data-action=\"incr\">\n\t\t\t\t\t+\n\t\t\t\t</button>\n\t\t\t\t<span class=\"cart__book-amount-text\">{{quantity}}</span>\n\t\t\t\t<button class=\"cart__book-amount-btn\" data-action=\"decr\">\n\t\t\t\t\t-\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<p class=\"cart__book-price\"><span>{{price}}</span> $</p>\n\t\t</div>\n\t</div>\n</li>","import { refs } from './common-ref.js';\nimport { getBooksFromStorage } from './getBooksFromStorage';\n\nexport function bookCounter() {\n  const bookListItems = document.querySelectorAll('.cart__list .cart__item');\n\n  bookListItems.forEach(el => {\n    let bookAmount = el.querySelector('.cart__book-amount-text');\n    const btnIncr = el.querySelector('button[data-action=\"incr\"]');\n    const btnDecr = el.querySelector('button[data-action=\"decr\"]');\n    let price = el.querySelector('.cart__book-price span');\n\n    refs.paymentTotalPrice.textContent =\n      Number(refs.paymentTotalPrice.textContent) + Number(price.textContent);\n\n    if (bookAmount.textContent == 0) {\n      btnDecr.disabled = true;\n      btnDecr.classList.add('cart__book-amount-btn--disabled');\n    }\n\n    btnIncr.addEventListener('click', e => {\n      if (e.target.dataset.action === 'incr') {\n        qqq(e);\n        bookAmount.textContent++;\n        refs.paymentTotalPrice.textContent =\n          Number(refs.paymentTotalPrice.textContent) +\n          Number(price.textContent);\n      }\n      if (bookAmount.textContent > 0) {\n        btnDecr.disabled = false;\n        btnDecr.classList.remove('cart__book-amount-btn--disabled');\n      }\n    });\n    btnDecr.addEventListener('click', e => {\n      if (\n        e.target.dataset.action === 'decr' &&\n        e.target.previousElementSibling.textContent > 1\n      ) {\n        qqq(e);\n        bookAmount.textContent--;\n        refs.paymentTotalPrice.textContent =\n          Number(refs.paymentTotalPrice.textContent) -\n          Number(price.textContent);\n      }\n      if (bookAmount.textContent < 1) {\n        btnDecr.disabled = true;\n        btnDecr.classList.add('cart__book-amount-btn--disabled');\n      }\n    });\n  });\n}\n\nfunction qqq(e) {\n  if (e.target.nodeName === 'BUTTON') {\n    const checkedBookId = Number(e.target.closest('li').getAttribute('id'));\n    const savedBooks = getBooksFromStorage('booksInCart');\n\n    const isInCart = savedBooks.find(el => el.id === checkedBookId);\n\n    if (e.target.dataset.action === 'incr') {\n      isInCart.quantity++;\n    }\n    if (e.target.dataset.action === 'decr') {\n      isInCart.quantity--;\n    }\n\n    localStorage.setItem('booksInCart', JSON.stringify(savedBooks));\n  }\n}\n"],"names":["$4HWmI","parcelRequire","$44ace8cbb29b18be$export$2e2bcd8739ae039","$parcel$interopDefault","template","compiler","main","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","name","hash","loc","start","line","column","end","useData","$dc8a449e00adfde3$var$qqq","e","target","nodeName","checkedBookId","Number","closest","getAttribute","savedBooks","$gGHLW","getBooksFromStorage","isInCart","find","el","id","dataset","action","quantity","localStorage","setItem","JSON","stringify","$ce375e1befa17f1c$var$savedBooks","$020dy","setBooksCountInCart","refs","cartMessage","classList","add","console","log","markup","map","bookList","insertAdjacentHTML","join","$ce375e1befa17f1c$var$render","document","querySelectorAll","forEach","bookAmount","querySelector","btnIncr","btnDecr","price","paymentTotalPrice","textContent","disabled","addEventListener","remove","previousElementSibling"],"version":3,"file":"cart-page.38fc3d00.js.map"}