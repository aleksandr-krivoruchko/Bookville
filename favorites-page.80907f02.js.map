{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,gBCAAD,EAAAC,EAAA,S,YAoDA,SAASC,EAAIC,GACX,GAA0B,WAAtBA,EAAEC,OAAOC,SAAuB,CAClC,MAAMC,EAAgBC,OAAOJ,EAAEC,OAAOI,QAAQ,MAAMC,aAAa,OAC3DC,GAAa,EAAAC,EAAAC,qBAAoB,eAEjCC,EAAWH,EAAWI,MAAKC,GAAMA,EAAGC,KAAOV,IAEjB,SAA5BH,EAAEC,OAAOa,QAAQC,QACnBL,EAASM,WAEqB,SAA5BhB,EAAEC,OAAOa,QAAQC,QACnBL,EAASM,WAGXC,aAAaC,QAAQ,cAAeC,KAAKC,UAAUb,G,mBD7DvD,MAAMc,GAAW,EAAAC,EAAAC,sBAEbF,GACFxB,EAAA2B,KAAKC,WAAWC,UAAUC,IAAI,sBAQhC,WACE,MAAMC,EAASP,EAASQ,IAAIC,EAAAC,SAE5BlC,EAAA2B,KAAKQ,cAAcC,mBAAmB,YAAaL,EAAOM,KAAK,I,CARjEC,IACA,EAAAb,EAAAC,uBACA,EAAAD,EAAAc,uBCTwBC,SAASC,iBAAiB,2BAElCC,SAAQ3B,IACpB,IAAI4B,EAAa5B,EAAG6B,cAAc,2BAClC,MAAMC,EAAU9B,EAAG6B,cAAc,8BAC3BE,EAAU/B,EAAG6B,cAAc,8BACjC,IAAIG,EAAQhC,EAAG6B,cAAc,0BAE7B5C,EAAA2B,KAAKqB,kBAAkBC,YACrB1C,OAAOP,EAAA2B,KAAKqB,kBAAkBC,aAAe1C,OAAOwC,EAAME,aAE9B,GAA1BN,EAAWM,cACbH,EAAQI,UAAW,EACnBJ,EAAQjB,UAAUC,IAAI,oCAGxBe,EAAQM,iBAAiB,SAAShD,IACA,SAA5BA,EAAEC,OAAOa,QAAQC,SACnBhB,EAAIC,GACJwC,EAAWM,cACXjD,EAAA2B,KAAKqB,kBAAkBC,YACrB1C,OAAOP,EAAA2B,KAAKqB,kBAAkBC,aAC9B1C,OAAOwC,EAAME,cAEbN,EAAWM,YAAc,IAC3BH,EAAQI,UAAW,EACnBJ,EAAQjB,UAAUuB,OAAO,mC,IAG7BN,EAAQK,iBAAiB,SAAShD,IAEF,SAA5BA,EAAEC,OAAOa,QAAQC,QACjBf,EAAEC,OAAOiD,uBAAuBJ,YAAc,IAE9C/C,EAAIC,GACJwC,EAAWM,cACXjD,EAAA2B,KAAKqB,kBAAkBC,YACrB1C,OAAOP,EAAA2B,KAAKqB,kBAAkBC,aAC9B1C,OAAOwC,EAAME,cAEbN,EAAWM,YAAc,IAC3BH,EAAQI,UAAW,EACnBJ,EAAQjB,UAAUC,IAAI,mC,GAExB,G","sources":["src/js/favorites.js","src/js/book-counter.js"],"sourcesContent":["import { refs } from './common-ref';\nimport card from '../templates/card.hbs';\nimport { bookCounter } from './book-counter.js';\nimport { setBooksCountInFav, setBooksCountInCart } from './setBooksCountInCart';\n\nconst favBooks = setBooksCountInFav();\n\nif (favBooks) {\n  refs.favMessage.classList.add('fav__message--none');\n}\n\nrender();\nsetBooksCountInFav();\nsetBooksCountInCart();\nbookCounter();\n\nfunction render() {\n  const markup = favBooks.map(card);\n\n  refs.favoritesList.insertAdjacentHTML('beforeend', markup.join(''));\n}\n","import { refs } from './common-ref.js';\nimport { getBooksFromStorage } from './getBooksFromStorage';\n\nexport function bookCounter() {\n  const bookListItems = document.querySelectorAll('.cart__list .cart__item');\n\n  bookListItems.forEach(el => {\n    let bookAmount = el.querySelector('.cart__book-amount-text');\n    const btnIncr = el.querySelector('button[data-action=\"incr\"]');\n    const btnDecr = el.querySelector('button[data-action=\"decr\"]');\n    let price = el.querySelector('.cart__book-price span');\n\n    refs.paymentTotalPrice.textContent =\n      Number(refs.paymentTotalPrice.textContent) + Number(price.textContent);\n\n    if (bookAmount.textContent == 0) {\n      btnDecr.disabled = true;\n      btnDecr.classList.add('cart__book-amount-btn--disabled');\n    }\n\n    btnIncr.addEventListener('click', e => {\n      if (e.target.dataset.action === 'incr') {\n        qqq(e);\n        bookAmount.textContent++;\n        refs.paymentTotalPrice.textContent =\n          Number(refs.paymentTotalPrice.textContent) +\n          Number(price.textContent);\n      }\n      if (bookAmount.textContent > 0) {\n        btnDecr.disabled = false;\n        btnDecr.classList.remove('cart__book-amount-btn--disabled');\n      }\n    });\n    btnDecr.addEventListener('click', e => {\n      if (\n        e.target.dataset.action === 'decr' &&\n        e.target.previousElementSibling.textContent > 1\n      ) {\n        qqq(e);\n        bookAmount.textContent--;\n        refs.paymentTotalPrice.textContent =\n          Number(refs.paymentTotalPrice.textContent) -\n          Number(price.textContent);\n      }\n      if (bookAmount.textContent < 1) {\n        btnDecr.disabled = true;\n        btnDecr.classList.add('cart__book-amount-btn--disabled');\n      }\n    });\n  });\n}\n\nfunction qqq(e) {\n  if (e.target.nodeName === 'BUTTON') {\n    const checkedBookId = Number(e.target.closest('li').getAttribute('id'));\n    const savedBooks = getBooksFromStorage('booksInCart');\n\n    const isInCart = savedBooks.find(el => el.id === checkedBookId);\n\n    if (e.target.dataset.action === 'incr') {\n      isInCart.quantity++;\n    }\n    if (e.target.dataset.action === 'decr') {\n      isInCart.quantity--;\n    }\n\n    localStorage.setItem('booksInCart', JSON.stringify(savedBooks));\n  }\n}\n"],"names":["$4HWmI","parcelRequire","$dc8a449e00adfde3$var$qqq","e","target","nodeName","checkedBookId","Number","closest","getAttribute","savedBooks","$gGHLW","getBooksFromStorage","isInCart","find","el","id","dataset","action","quantity","localStorage","setItem","JSON","stringify","$6befdf793f7dd1b0$var$favBooks","$020dy","setBooksCountInFav","refs","favMessage","classList","add","markup","map","$fk3mF","default","favoritesList","insertAdjacentHTML","join","$6befdf793f7dd1b0$var$render","setBooksCountInCart","document","querySelectorAll","forEach","bookAmount","querySelector","btnIncr","btnDecr","price","paymentTotalPrice","textContent","disabled","addEventListener","remove","previousElementSibling"],"version":3,"file":"favorites-page.80907f02.js.map"}